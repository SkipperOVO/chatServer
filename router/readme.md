### 功能
router 功能：
    描述：处理所有客户端的第一次接入请求。
    接收：http get request
    返回：nettyServer ip:port
    过程：接收所有客户端的 http 接入请求，所有的客户端在和 netty 服务器建立 wss 连接前，都需要先通过入口 Nginx 路由到一个 router，router
首先验证用户的 token，如果用户没有 token 的话，直接丢弃或者重定向到登录。验证 token 合法性，如果非法同样丢弃。获取 token 后从 token 中提取 userId，
获取可用 NettyServer 列表，选择一个 nettyServer 然后将 userId，nettyServer 注册到集群 redis 中作为全局路由。返回给客户端 nettyServer ip:port。


#### 凭证
    系统中凭证采取 jwt token 形式。传统的用户状态管理和识别是通过 cookie-session 的形式，状态主要保存在服务器端。但是由于分布式不可避免，囿于
CAP 理论的约束，所有用户的 session 很难在分布式系统中进行同步，所以 jwt token 作为凭证更适合分布式系统。
    不管是采用 cookie-session 还是 jwt 的形式，系统的安全性都需要确保两点：凭证不被 **篡改** 和 **泄露**。这两者都会出现 冒认 的问题。泄露
问题可以通过使用 SSL 加密通道来保障网络传输过程中报文不被中间人窃听和劫持；篡改问题通过使用 HS256 hash 算法，通过用户第一次在服务端登录认证时，服务
端对用户信息使用只有服务端保存的密钥进行带密钥加盐的hash，这样只有服务端能够加密和解密，只要 token 有任何改动都可以在验证的时候发现，确保了无法被篡改。

    另外，如果是分布式的服务，一般使用非对称加密来进行签名来确保安全性。通常 token 的生成和颁发都是用单独的授权中心来完成，
这时候其他的服务拿到用户的 token 后，一般使用授权中心颁发的公钥来解密，因为只有授权中心可以加密，只有授权中心的公钥可以解密，所以可以确保不被篡改，同时
也比对称加密要安全，防止密钥泄露。